<!DOCTYPE html>
<html lang="ne">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TITAN ENTERPRISE CRM v4.0.0</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-slate-50">

    <div id="loginPage" class="hidden min-h-screen flex items-center justify-center bg-[#0f172a]">
        <div class="bg-white w-full max-w-md rounded-[45px] p-10 shadow-2xl border-b-[10px] border-blue-600">
            <div class="text-center mb-8">
                <h1 class="text-4xl font-black italic">TITAN <span class="text-blue-600">CRM</span></h1>
                <p class="text-[10px] font-bold text-slate-400 uppercase tracking-[5px] mt-2">Ultimate RPA Edition</p>
            </div>
            <form id="loginForm" class="space-y-4">
                <input type="text" id="username" placeholder="USERNAME" class="w-full p-4 bg-slate-100 rounded-2xl outline-none font-bold" required>
                <input type="password" id="password" placeholder="PASSWORD" class="w-full p-4 bg-slate-100 rounded-2xl outline-none font-bold" required>
                <button type="submit" class="w-full bg-blue-600 text-white p-5 rounded-3xl font-black uppercase shadow-xl hover:bg-blue-700">Enter Dashboard</button>
            </form>
        </div>
    </div>

    <div id="dashboardPage" class="hidden min-h-screen flex flex-col">
        <nav class="bg-white border-b sticky top-0 z-[100] px-8 py-4 flex justify-between items-center shadow-sm">
            <div class="flex items-center gap-6">
                <h2 class="text-2xl font-black italic">TITAN <span class="text-blue-600">v4</span></h2>
                <div id="lastUpdate" class="text-[11px] bg-blue-50 text-blue-700 px-4 py-1.5 rounded-full font-black border border-blue-100 italic">LIVE: --:--:--</div>
            </div>
            
            <div class="flex items-center gap-4">
                <div id="reportBtnContainer"></div>
                <div id="userDisplay" class="hidden md:block text-[11px] font-black text-slate-600 bg-slate-100 px-4 py-2 rounded-2xl border uppercase">OP: --</div>
                <button onclick="toggleSettingsModal()" class="p-3 bg-slate-900 text-white rounded-2xl transition-transform active:scale-90"><i class="fas fa-cog text-blue-400"></i></button>
                <button id="logoutBtn" class="p-3 bg-red-100 text-red-600 rounded-2xl transition-transform active:scale-90"><i class="fas fa-power-off"></i></button>
            </div>
        </nav>

        <div class="grid grid-cols-2 md:grid-cols-6 gap-4 p-8 stats-grid">
            <div class="bg-white p-6 rounded-[30px] border-2 border-slate-100 shadow-sm">
                <p class="text-[10px] font-black text-slate-400 uppercase">कुल आम्दानी</p>
                <h3 id="statIncome" class="text-2xl font-black text-emerald-600">Rs. 0</h3>
            </div>
            <div class="bg-white p-6 rounded-[30px] border-2 border-slate-100 shadow-sm">
                <p class="text-[10px] font-black text-slate-400 uppercase">Success</p>
                <h3 id="statSuccess" class="text-2xl font-black text-blue-600">0</h3>
            </div>
            <div class="bg-white p-6 rounded-[30px] border-2 border-slate-100 shadow-sm">
                <p class="text-[10px] font-black text-slate-400 uppercase">Pending</p>
                <h3 id="statPending" class="text-2xl font-black text-orange-500">0</h3>
            </div>
            <div class="bg-white p-6 rounded-[30px] border-2 border-slate-100 shadow-sm">
                <p class="text-[10px] font-black text-slate-400 uppercase">Inquiry</p>
                <h3 id="statInquiry" class="text-2xl font-black text-slate-500">0</h3>
            </div>
            <div class="bg-white p-6 rounded-[30px] border-2 border-slate-100 shadow-sm">
                <p class="text-[10px] font-black text-slate-400 uppercase">प्रक्रियामा</p>
                <h3 id="statWorking" class="text-2xl font-black text-purple-600">0</h3>
            </div>
            <div class="bg-white p-6 rounded-[30px] border-2 border-slate-100 shadow-sm">
                <p class="text-[10px] font-black text-slate-400 uppercase">समस्या (Problem)</p>
                <h3 id="statProblem" class="text-2xl font-black text-red-600">0</h3>
            </div>
        </div>

        <div class="px-8 mb-6 flex flex-col md:flex-row gap-4 items-center justify-between">
            <div class="relative w-full max-w-xl">
                <i class="fas fa-search absolute left-6 top-1/2 -translate-y-1/2 text-slate-400"></i>
                <input type="text" id="searchInput" placeholder="ग्राहकको नाम वा फोन नम्बर खोज्नुहोस्..." class="w-full pl-14 pr-8 py-4 bg-white border-2 border-slate-100 rounded-[25px] outline-none focus:border-blue-500 font-bold shadow-lg transition-all">
            </div>
            <div class="flex items-center gap-4">
                <button onclick="syncCoreDatabase()" class="px-6 py-4 bg-white border-2 border-slate-200 rounded-[20px] font-black text-[11px] uppercase shadow-md hover:bg-slate-50 transition-all active:scale-95">
                    <i class="fas fa-sync-alt mr-2 text-blue-600"></i> Refresh
                </button>
                <div id="totalRecords" class="text-slate-500 font-black text-[10px] uppercase bg-slate-200 px-4 py-2 rounded-full">TOTAL: 0 RECORDS</div>
            </div>
        </div>

        <div class="px-8 pb-10">
            <div class="bg-white rounded-[40px] shadow-2xl overflow-hidden border-2 border-slate-100 table-container">
                <div class="overflow-x-auto">
                    <table class="w-full">
                        \<thead class="bg-slate-900 text-white text-[10px] uppercase tracking-wider">
    <tr>
        <th class="p-5 text-left">दर्ता मिति</th>
        <th class="p-5 text-center">स्रोत</th>
        <th class="p-5 text-left">ग्राहक विवरण</th>
        <th class="p-5 text-left">सेवा</th>
        <th class="p-5 text-center">RPA</th>
        <th class="p-5 text-left">अवस्था</th>
        <th class="p-5 text-left text-blue-400">च्याट समरी</th> <th class="p-5 text-left">नोट</th>
        <th class="p-5 text-center">पेमेन्ट</th>
        <th class="p-5 text-center">अपरेटर</th>
        <th class="p-5 text-center">डकुमेन्ट</th>
    </tr>
</thead>
                        <tbody id="tableBody" class="divide-y divide-slate-100">
                        </tbody>
                    </table>
                </div>

                <div class="flex items-center justify-between p-6 bg-slate-50 border-t-2 border-slate-100">
                    <button onclick="changePage('prev')" class="px-8 py-3 bg-white border-2 border-slate-200 rounded-2xl font-black text-[11px] hover:bg-slate-900 hover:text-white transition-all shadow-sm active:scale-90">
                        <i class="fas fa-chevron-left mr-2"></i> BACK
                    </button>
                    <div id="pageInfo" class="font-black text-[12px] text-blue-600 tracking-widest uppercase bg-blue-50 px-6 py-2 rounded-full border border-blue-100">
                        PAGE 1
                    </div>
                    <button onclick="changePage('next')" class="px-8 py-3 bg-white border-2 border-slate-200 rounded-2xl font-black text-[11px] hover:bg-slate-900 hover:text-white transition-all shadow-sm active:scale-90">
                        NEXT <i class="fas fa-chevron-right ml-2"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="notificationZone"></div>

    <script src="app.js"></script>
</body>
</html>